{"version":3,"sources":["AuthContext.js","utils/constants.js","utils/index.js","utils/update.js","components/PollToggle/index.js","components/Admin/SetUserPermissionsDialog.js","components/Admin/index.js","components/Search/SearchBar.js","components/Layout/Header.js","components/Layout/SideMenu.js","components/Layout/Body.js","components/Layout/index.js","utils/token.js","components/ProfileList.js","components/Channel/AddChannelDialog.js","components/ChannelList.js","components/ProfileChannelLists.js","pages/HomePage.js","components/Channel/AddMemberDialog.js","components/Message/MessagePin.js","components/Message/MessageReact.js","components/Message/MessageRemove.js","components/Message/MessageEdit.js","components/Message/index.js","components/Message/AddMessageTimerDialog.js","components/Message/AddMessage.js","components/Channel/ChannelMessages.js","components/Channel/index.js","pages/ChannelPage.js","pages/LoginPage.js","pages/RegisterPage.js","pages/ForgotPasswordPage.js","pages/ResetPasswordPage.js","components/Profile/EditableFields.js","components/Profile/index.js","pages/ProfilePage.js","components/Search/index.js","pages/SearchPage.js","components/Layout/ProtectedRoute.js","axios.js","utils/text.js","App.js","serviceWorker.js","theme.js","index.js"],"names":["AuthContext","React","createContext","AuthProvider","Provider","Consumer","url","window","BACKEND_PORT","PERMISSION_IDS","OWNER","ADMIN","MEMBER","PAGINATION_SIZE","SLICE_SIZE","useInterval","callback","delay","savedCallback","useRef","useEffect","current","id","setInterval","clearInterval","isMatchingId","a","b","parseInt","stepSubscribers","subscribeToStep","subscriber","interval","undefined","find","o","push","unsubscribeToStep","unsubscriber","filter","step","iter","forEach","console","log","useStep","watches","shouldSubscribe","isPolling","getIsPolling","setIsPolling","bool","count","usePolling","options","PollToggle","useState","open","setOpen","anchorRef","selectedIndex","setSelectedIndex","handleClose","event","contains","target","ButtonGroup","variant","color","ref","aria-label","style","marginRight","Button","onClick","disabled","size","aria-owns","aria-haspopup","prevOpen","Popper","anchorEl","transition","disablePortal","TransitionProps","placement","Grow","transformOrigin","Paper","ClickAwayListener","onClickAway","MenuList","map","option","index","MenuItem","key","selected","handleMenuItemClick","SetUserPermissionsDialog","children","permissionId","setPermissionId","users","setUsers","selectedUser","setSelectedUser","token","useContext","axios","get","params","then","data","catch","err","Dialog","onClose","aria-labelledby","DialogTitle","onSubmit","preventDefault","value","u_id","permission_id","post","response","DialogContent","DialogContentText","Grid","container","spacing","direction","justify","alignItems","item","xs","Select","width","onChange","newUserId","d","idx","name_first","name_last","RadioGroup","name","newPermissionId","row","FormControlLabel","control","Radio","label","labelPlacement","DialogActions","type","Admin","buttonRef","aria-controls","keepMounted","useStyles","makeStyles","theme","search","position","borderRadius","shape","backgroundColor","fade","palette","common","white","marginLeft","breakpoints","up","searchIcon","height","pointerEvents","display","justifyContent","inputRoot","inputInput","padding","transitions","create","withRouter","props","classes","query_str","setQueryStr","history","className","InputBase","placeholder","root","input","inputProps","e","appBar","menuButton","title","flexGrow","logoutButton","float","Header","handleMenuToggle","useTheme","matches","useMediaQuery","loggedOut","setLoggedOut","localStorage","removeItem","to","AppBar","Toolbar","IconButton","edge","textDecoration","Typography","noWrap","drawer","flexShrink","drawerPaper","toolbar","mixins","paddingLeft","SideMenu","Hidden","smUp","implementation","Drawer","anchor","paper","ModalProps","Divider","xsDown","body","Body","Layout","menu","extractUId","getItem","ProfileList","uid","List","ListItem","button","component","Link","ListItemIcon","ListItemText","primary","AddChannelDialog","is_public","checked","TextField","autoFocus","margin","fullWidth","Switch","ChannelList","curr_channel_id","channel_id","myChannels","setMyChannels","allChannels","setAllChannels","fetchChannelsData","getMyChannels","getAllChannels","all","spread","myChannelResponse","allChannelResponse","myChannelData","channels","filteredChannels","channel","c","subheader","ListSubheader","flex","ProfileChannelLists","HomePage","paddingTop","AddMemberDialog","withTheme","message_id","is_pinned","isPinned","setIsPinned","StepContext","path","mdiPin","action","active","mdiPinOutline","MessageReact","reacts","thumbUpCount","is_reacted","thumbUpIndex","findIndex","react","react_id","u_ids","length","is_this_user_reacted","Badge","anchorOrigin","horizontal","vertical","badgeContent","messageReact","fontSize","MessageRemove","delete","MessageEdit","message","prompt","put","Message","msg","time_created","is_unread","setName","imgUrl","setImgUrl","email","handle_str","profile_img_url","error","src","timeago","secondary","split","i","AddMessageTimerDialog","onTimerChange","Date","selectedDate","setSelectedDate","toDate","KeyboardButtonProps","flexDirection","alignSelf","rightIcon","standupTimer","TIMER_INACTIVE_VALUE","AddMessage","currentMessage","setCurrentMessage","currentTimer","setCurrentTimer","timerDialogOpen","setTimerDialogOpen","onAdd","isTimerSet","standupRemaining","setStandupRemaining","standupEndTime","setStandupEndTime","submitMessage","trim","time_sent","getTime","startsWith","found","match","alert","isNaN","Number","isInteger","time_finish","now","Math","round","is_active","multiline","onKeyDown","getModifierState","InputProps","endAdornment","InputAdornment","StepProvider","ChannelMessages","messages","setMessages","pagination","setPagination","fetchChannelMessages","start","isPaginating","currentStart","newMessages","end","currentEnd","sliceStart","isEnd","min","pageSize","slice","reverse","Channel","members","setMembers","owners","setOwners","fetchChannelData","owner_members","all_members","userIsMember","member","userIsOwner","owner","viewerIsOwner","viewerIsMember","toUpperCase","href","removeOwner","addOwner","leaveChannel","joinChannel","ChannelPage","light","card","background","marginTop","LoginPage","setAuth","Container","maxWidth","Box","boxShadow","Avatar","noValidate","password","required","autoComplete","RegisterPage","values","setValues","handleChange","ForgotPasswordPage","reset_code","new_password","EditableFields","editable","master","masterValue","slaves","slaveValues","onSave","edit","setEdit","prevMasterValue","setPrevMasterValue","currMasterValue","setCurrMasterValue","prevSlaveValues","setPrevSlaveValues","currSlaveValues","setCurrSlaveValues","toggleEdit","slave","readOnly","valueIndex","copySlaves","val","onSlaveChange","cursor","Profile","profile","profileDetails","setProfileDetails","toString","passed_props","img_url","raw_text","x_start","y_start","x_end","y_end","items","ProfilePage","Search","loading","setLoading","Array","isArray","marginBottom","LinearProgress","SearchPage","ProtectedRoute","defaults","baseURL","headers","interceptors","request","use","method","qs","stringify","_","toast","Promise","reject","App","authDetails","setAuthDetails","setItem","exact","render","ResetPasswordPage","Boolean","location","hostname","createMuiTheme","main","red","A400","default","ReactDOM","ThemeProvider","utils","MomentUtils","CssBaseline","autoClose","hideProgressBar","newestOnTop","closeOnClick","rtl","pauseOnVisibilityChange","draggable","pauseOnHover","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.0047a936.chunk.js","sourcesContent":["import React from 'react';\n\nconst AuthContext = React.createContext();\n\nexport const AuthProvider = AuthContext.Provider;\nexport const AuthConsumer = AuthContext.Consumer;\nexport default AuthContext;\n","export const drawerWidth = 240;\nexport const url = 'http://localhost:' + window.BACKEND_PORT;\nexport const PERMISSION_IDS = {\n    OWNER: 1,\n    ADMIN: 2,\n    MEMBER: 3,\n}\nexport const PAGINATION_SIZE = 50;\nexport const SLICE_SIZE = 10;","// from: https://overreacted.io/making-setinterval-declarative-with-react-hooks/\nimport { useEffect, useRef } from 'react';\n\nexport function useInterval(callback, delay) {\n    const savedCallback = useRef();\n\n    // Remember the latest callback.\n    useEffect(() => {\n        savedCallback.current = callback;\n    }, [callback]);\n\n    // Set up the interval.\n    useEffect(() => {\n        function tick() {\n        savedCallback.current();\n        }\n        if (delay !== null) {\n        let id = setInterval(tick, delay);\n        return () => clearInterval(id);\n        }\n    }, [delay]);\n}\n\nexport const isMatchingId = (a,b) => parseInt(a,10) === parseInt(b,10)\n","import React from 'react';\nimport {useInterval} from './index';\n\nexport let stepSubscribers = [];\n\nexport const subscribeToStep = (subscriber, interval=1) => {\n    if (stepSubscribers.find(o => o.subscriber === subscriber) !== undefined) return;\n    stepSubscribers.push({ subscriber, interval });\n}\nexport const unsubscribeToStep = (unsubscriber) => stepSubscribers = stepSubscribers.filter(o => o.subscriber !== unsubscriber);\n\nexport const step = (iter) => {\n    stepSubscribers.forEach(o => {\n        console.log(iter, o.interval, iter % o.interval == 0, o.subscriber)\n        if (!iter || iter % o.interval == 0) {\n            o.subscriber()\n        }\n    });\n}\n\nexport const useStep = (subscriber, watches=[], interval=1) => {\n    const shouldSubscribe = subscriber && typeof subscriber === \"function\";\n    React.useEffect(() => {\n        if (shouldSubscribe) {\n            subscriber();\n            subscribeToStep(subscriber, interval);\n            return () => unsubscribeToStep(subscriber);\n        }\n    }, watches);\n    return step;\n};\n\nlet isPolling = false;\nexport const pollingInterval = 2000;\nexport const getIsPolling = () => isPolling;\nexport const setIsPolling = bool => {\n    isPolling = !!bool; // force boolean type\n}\n\n/* IMPORTANT: Called in PollToggle */\nlet count = 0;\nexport const usePolling = () => {\n    useInterval(() => {\n        if (isPolling) step(count++);\n    }, pollingInterval);\n}\n","import React from 'react';\n\nimport Button from '@material-ui/core/Button';\nimport ButtonGroup from '@material-ui/core/ButtonGroup';\nimport ArrowDropDownIcon from '@material-ui/icons/ArrowDropDown';\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\nimport Grow from '@material-ui/core/Grow';\nimport Paper from '@material-ui/core/Paper';\nimport Popper from '@material-ui/core/Popper';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport MenuList from '@material-ui/core/MenuList';\nimport { getIsPolling, setIsPolling, step, usePolling } from '../../utils/update';\n\nconst options = ['Live', 'Step'];\n\nfunction PollToggle() {\n\n    const [open, setOpen] = React.useState(false);\n    const anchorRef = React.useRef(null);\n    const [selectedIndex, setSelectedIndex] = React.useState(getIsPolling() ? 0 : 1);\n\n    usePolling();\n\n    const handleClick = () => {\n        step();\n    };\n\n    const handleMenuItemClick = (event, index) => {\n        setIsPolling(index === 0);\n        setSelectedIndex(index);\n        setOpen(false);\n    };\n\n    const handleToggle = () => {\n        setOpen(prevOpen => !prevOpen);\n    };\n\n    const handleClose = event => {\n        if (anchorRef.current && anchorRef.current.contains(event.target)) {\n            return;\n        }\n        setOpen(false);\n    };\n\n    return (<>\n        <ButtonGroup\n            variant=\"contained\"\n            color=\"primary\"\n            ref={anchorRef}\n            aria-label=\"split button\"\n            style={{marginRight: 15}}\n        >\n            <Button onClick={handleClick} disabled={selectedIndex === 0}>{options[selectedIndex]}</Button>\n            <Button\n            color=\"primary\"\n            size=\"small\"\n            aria-owns={open ? 'menu-list-grow' : undefined}\n            aria-haspopup=\"true\"\n            onClick={handleToggle}\n            >\n            <ArrowDropDownIcon />\n            </Button>\n        </ButtonGroup>\n        <Popper open={open} anchorEl={anchorRef.current} transition disablePortal>\n            {({ TransitionProps, placement }) => (\n            <Grow\n                {...TransitionProps}\n                style={{\n                transformOrigin: placement === 'bottom' ? 'center top' : 'center bottom',\n                }}\n            >\n                <Paper id=\"menu-list-grow\">\n                <ClickAwayListener onClickAway={handleClose}>\n                    <MenuList>\n                    {options.map((option, index) => (\n                        <MenuItem\n                        key={option}\n                        disabled={index === 2}\n                        selected={index === selectedIndex}\n                        onClick={event => handleMenuItemClick(event, index)}\n                        >\n                        {option}\n                        </MenuItem>\n                    ))}\n                    </MenuList>\n                </ClickAwayListener>\n                </Paper>\n            </Grow>\n            )}\n        </Popper>\n    </>);\n}\n\nexport default PollToggle;","import React from \"react\";\nimport axios from 'axios';\nimport {\n  Dialog,\n  DialogTitle,\n  DialogActions,\n  DialogContent,\n  DialogContentText,\n  Button,\n  TextField,\n  Grid,\n  FormControlLabel,\n  RadioGroup,\n  Radio,\n  MenuItem,\n  Select,\n  InputLabel,\n} from \"@material-ui/core\";\nimport AuthContext from \"../../AuthContext\";\nimport { PERMISSION_IDS } from \"../../utils/constants\";\n\nfunction SetUserPermissionsDialog({ children, ...props }) {\n\n    const [open, setOpen] = React.useState(false);\n    const [permissionId, setPermissionId] = React.useState(PERMISSION_IDS.MEMBER);\n    const [users, setUsers] = React.useState([]);\n    const [selectedUser, setSelectedUser] = React.useState('');\n    const token = React.useContext(AuthContext);\n\n    function fetchUserData() {\n    axios\n      .get('/users/all', {\n        params: {\n          token,\n        },\n      })\n      .then(({ data }) => {\n        setUsers(data['users']);\n      })\n      .catch((err) => {});\n     }\n\n    React.useEffect(() => {\n        fetchUserData();\n    }, []);\n\n\n    const handleRadioChange = event => {\n        const newPermissionId = parseInt(event.target.value,10);\n        setPermissionId(newPermissionId);\n    };\n\n    const handleUserSelect = event => {\n        const newUserId = parseInt(event.target.value,10);\n        setSelectedUser(newUserId);\n    };\n\n    function handleClickOpen() {\n        setOpen(true);\n    }\n\n    function handleClose() {\n        setOpen(false);\n    }\n\n    function handleSubmit(event) {\n        event.preventDefault();\n\n        if (!event.target[0].value) return;\n\n        const u_id = parseInt(event.target[0].value,10);\n        const permission_id = parseInt(permissionId,10);\n\n        axios\n        .post(`/admin/userpermission/change`, { token, u_id, permission_id })\n        .then(response => {\n            console.log(response);\n        })\n        .catch(err => {});\n    }\n\n    return <>\n        <div onClick={handleClickOpen}>\n        {children}\n        </div>\n        <Dialog\n            open={open}\n            onClose={handleClose}\n            aria-labelledby=\"form-dialog-title\"\n        >\n            <DialogTitle id=\"form-dialog-title\">Set User Permissions</DialogTitle>\n            <form onSubmit={handleSubmit}>\n                <DialogContent>\n                    <DialogContentText>\n                    Select a user below to set permissions for this user\n                    </DialogContentText>\n                    <Grid\n                        container\n                        spacing={2}\n                        direction=\"row\"\n                        justify=\"center\"\n                        alignItems=\"center\"\n                    >\n                        <Grid item xs={12}>\n                            <Select style={{width:\"100%\"}} id=\"u_id\" onChange={handleUserSelect} value={selectedUser}>\n                              {users.map((d, idx) => {\n                                return <MenuItem key={d.u_id} value={d.u_id}>{d.name_first} {d.name_last}</MenuItem>\n                              })}\n                            </Select>\n                        </Grid>\n                        <Grid container item justify=\"center\" alignItems=\"center\">\n                            <RadioGroup aria-label=\"position\" name=\"position\" value={permissionId} onChange={handleRadioChange} row>\n                                <FormControlLabel\n                                    value={PERMISSION_IDS.MEMBER}\n                                    control={<Radio color=\"primary\" />}\n                                    label=\"Member\"\n                                    labelPlacement=\"bottom\"\n                                />\n                                <FormControlLabel\n                                    value={PERMISSION_IDS.ADMIN}\n                                    control={<Radio color=\"primary\" />}\n                                    label=\"Admin\"\n                                    labelPlacement=\"bottom\"\n                                />\n                                <FormControlLabel\n                                    value={PERMISSION_IDS.OWNER}\n                                    control={<Radio color=\"primary\" />}\n                                    label=\"Owner\"\n                                    labelPlacement=\"bottom\"\n                                />\n                            </RadioGroup>\n                        </Grid>\n                    </Grid>\n                </DialogContent>\n                <DialogActions>\n                    <Button onClick={handleClose} color=\"primary\">\n                    Cancel\n                    </Button>\n                    <Button onClick={handleClose} type=\"submit\" color=\"primary\">\n                    Set\n                    </Button>\n                </DialogActions>\n            </form>\n        </Dialog>\n    </>;\n}\n\nexport default SetUserPermissionsDialog;\n","import React from 'react';\nimport Button from '@material-ui/core/Button';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport SetUserPermissionsDialog from './SetUserPermissionsDialog';\n\nexport default function Admin() {\n\n  const [open, setOpen] = React.useState(false);\n  const buttonRef = React.useRef();\n\n  const handleClick =(event) => setOpen(true);\n  const handleClose = () => setOpen(false);\n\n  return (\n    <div>\n      <Button\n        ref={buttonRef}\n        aria-controls=\"simple-menu\"\n        aria-haspopup=\"true\"\n        onClick={handleClick}\n        color=\"inherit\"\n      >\n        Admin\n      </Button>\n      <Menu\n        id=\"simple-menu\"\n        anchorEl={buttonRef.current}\n        keepMounted\n        open={open}\n        onClose={handleClose}\n      >\n        <SetUserPermissionsDialog>\n            <MenuItem onClick={handleClose}>Set User Permissions</MenuItem>\n        </SetUserPermissionsDialog>\n        <MenuItem onClick={handleClose}>Close</MenuItem>\n      </Menu>\n    </div>\n  );\n}","import React from 'react';\nimport { withRouter } from 'react-router-dom';\nimport InputBase from '@material-ui/core/InputBase';\nimport { fade, makeStyles } from '@material-ui/core/styles';\nimport SearchIcon from '@material-ui/icons/Search';\n\nconst useStyles = makeStyles(theme => ({\n    search: {\n        position: 'relative',\n        borderRadius: theme.shape.borderRadius,\n        backgroundColor: fade(theme.palette.common.white, 0.15),\n        '&:hover': {\n        backgroundColor: fade(theme.palette.common.white, 0.25),\n        },\n        marginLeft: 0,\n        width: '100%',\n        [theme.breakpoints.up('sm')]: {\n        marginLeft: theme.spacing(1),\n        width: 'auto',\n        marginRight: theme.spacing(2),\n        },\n    },\n    searchIcon: {\n        width: theme.spacing(7),\n        height: '100%',\n        position: 'absolute',\n        pointerEvents: 'none',\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n    },\n    inputRoot: {\n        color: 'inherit',\n    },\n    inputInput: {\n        padding: theme.spacing(1, 1, 1, 7),\n        transition: theme.transitions.create('width'),\n        width: '100%',\n        [theme.breakpoints.up('sm')]: {\n        width: 120,\n        '&:focus': {\n            width: 200,\n        },\n        },\n    },\n}));\n\nfunction SearchBar(props) {\n    const classes = useStyles();\n\n    const [query_str, setQueryStr] = React.useState(\"\");\n\n    const onSubmit = () => props.history.push(`/search/${query_str}`);\n\n    return (\n        <form onSubmit={onSubmit}>\n        <div className={classes.search}>\n            <div className={classes.searchIcon}>\n                <SearchIcon />\n            </div>\n            <InputBase\n                placeholder=\"Search\"\n                classes={{\n                root: classes.inputRoot,\n                input: classes.inputInput,\n                }}\n                inputProps={{ 'aria-label': 'search' }}\n                value={query_str}\n                onChange={e => setQueryStr(e.target.value)}\n            />\n        </div>\n        </form>\n    );\n}\n\nexport default withRouter(SearchBar);","import axios from 'axios';\nimport {\n  AppBar,\n  Button,\n  IconButton,\n  Toolbar,\n  Typography,\n} from '@material-ui/core';\nimport { makeStyles, useTheme } from '@material-ui/core/styles';\nimport useMediaQuery from '@material-ui/core/useMediaQuery';\nimport MenuIcon from '@material-ui/icons/Menu';\nimport React from 'react';\nimport { Link, Redirect } from 'react-router-dom';\nimport AuthContext from '../../AuthContext';\nimport { drawerWidth } from '../../utils/constants';\nimport PollToggle from '../PollToggle';\nimport Admin from '../Admin';\nimport SearchBar from '../Search/SearchBar';\n\nconst useStyles = makeStyles((theme) => ({\n  appBar: {\n    marginLeft: drawerWidth,\n    [theme.breakpoints.up('sm')]: {\n      width: `calc(100% - ${drawerWidth}px)`,\n    },\n  },\n  menuButton: {\n    marginRight: theme.spacing(2),\n  },\n  title: {\n    flexGrow: 1,\n  },\n  logoutButton: {\n    float: 'right',\n  },\n}));\n\nfunction Header({ handleMenuToggle = () => {} }) {\n  const classes = useStyles();\n  const theme = useTheme();\n  const matches = useMediaQuery(theme.breakpoints.up('sm'));\n  const token = React.useContext(AuthContext);\n  const [loggedOut, setLoggedOut] = React.useState(false);\n\n  if (loggedOut) {\n    axios.post(`/auth/logout`, { token })\n      .then((response) => {\n        console.log(response);\n      })\n      .catch((err) => {});\n    localStorage.removeItem('token');\n    localStorage.removeItem('u_id');\n    return <Redirect to=\"/login\" />;\n  }\n\n  return (\n    <AppBar position=\"fixed\" className={classes.appBar}>\n      <Toolbar>\n        {!matches && (\n          <>\n            <IconButton\n              color=\"inherit\"\n              aria-label=\"open drawer\"\n              edge=\"start\"\n              onClick={handleMenuToggle}\n              className={classes.menuButton}\n            >\n              <MenuIcon />\n            </IconButton>\n            <Link to=\"/\" style={{ color: 'white', textDecoration: 'none' }}>\n              <Typography variant=\"h5\" noWrap>\n                Slackr\n              </Typography>\n            </Link>\n          </>\n        )}\n        <div variant=\"h6\" className={classes.title}>\n\n        </div>\n        <div style={{display:'flex'}}>\n          <SearchBar />\n          <PollToggle />\n          <Admin />\n          <Button\n            color=\"inherit\"\n            className={classes.logoutButton}\n            onClick={() => {\n              setLoggedOut(true);\n            }}\n          >\n            Logout\n          </Button>\n        </div>\n      </Toolbar>\n    </AppBar>\n  );\n}\n\nexport default Header;\n","import React from 'react';\nimport { Divider, Drawer, Hidden, Typography } from '@material-ui/core';\nimport { makeStyles, useTheme } from '@material-ui/core/styles';\nimport { drawerWidth } from '../../utils/constants';\nimport { Link } from 'react-router-dom';\n\nconst useStyles = makeStyles((theme) => ({\n  drawer: {\n    [theme.breakpoints.up('sm')]: {\n      width: drawerWidth,\n      flexShrink: 0,\n    },\n  },\n  drawerPaper: {\n    width: drawerWidth,\n  },\n  toolbar: {\n    ...theme.mixins.toolbar,\n    display: 'flex',\n    alignItems: 'center',\n    paddingLeft: theme.spacing(2),\n  },\n}));\n\nfunction SideMenu({ container, children, open, setOpen }) {\n  const classes = useStyles();\n  const theme = useTheme();\n\n  return (\n    <nav className={classes.drawer} aria-label=\"channels\">\n      {/* The implementation can be swapped with js to avoid SEO duplication of links. */}\n      <Hidden smUp implementation=\"css\">\n        <Drawer\n          container={container}\n          variant=\"temporary\"\n          anchor={theme.direction === 'rtl' ? 'right' : 'left'}\n          open={open}\n          onClose={() => setOpen(false)}\n          classes={{\n            paper: classes.drawerPaper,\n          }}\n          ModalProps={{\n            keepMounted: true, // Better open performance on mobile.\n          }}\n        >\n          <div className={classes.toolbar} />\n          <Divider />\n          {children}\n        </Drawer>\n      </Hidden>\n      <Hidden xsDown implementation=\"css\">\n        <Drawer\n          classes={{\n            paper: classes.drawerPaper,\n          }}\n          variant=\"permanent\"\n          open\n        >\n          <div className={classes.toolbar}>\n            <Link to=\"/\" style={{ color: 'black', textDecoration: 'none' }}>\n              <Typography variant=\"h5\" noWrap>\n                Slackr\n              </Typography>\n            </Link>\n          </div>\n          {children}\n        </Drawer>\n      </Hidden>\n    </nav>\n  );\n}\n\nexport default SideMenu;\n","import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { drawerWidth } from '../../utils/constants';\n\nconst useStyles = makeStyles((theme) => ({\n  body: {\n    [theme.breakpoints.up('sm')]: {\n      width: `calc(100% - ${drawerWidth}px)`,\n    },\n    padding: 20,\n  },\n  toolbar: theme.mixins.toolbar,\n}));\n\nfunction Body({ children }) {\n  const classes = useStyles();\n  return (\n    <div className={classes.body}>\n      {/* Padding */}\n      <div className={classes.toolbar} />\n      {children}\n    </div>\n  );\n}\n\nexport default Body;\n","import React from 'react';\nimport Header from './Header';\nimport SideMenu from './SideMenu';\nimport Body from './Body';\n\nfunction Layout({ menu, body }) {\n  const [open, setOpen] = React.useState(false);\n  function handleMenuToggle() {\n    setOpen((open) => !!!open);\n  }\n  return (\n    <div style={{ display: 'flex' }}>\n      <Header handleMenuToggle={handleMenuToggle} />\n      <SideMenu open={open} setOpen={setOpen}>\n        {menu}\n      </SideMenu>\n      <Body>{body}</Body>\n    </div>\n  );\n}\n\nexport default Layout;\n","export function extractUId(token) {\n  let u_id = localStorage.getItem('u_id');\n  if (u_id == null) {\n  \tu_id = -1;\n  }\n  return u_id;\n}\n","import React from 'react';\nimport { List, ListItem, ListItemIcon, ListItemText } from '@material-ui/core';\nimport AccountCircle from '@material-ui/icons/AccountCircle';\nimport { Link } from 'react-router-dom';\nimport { extractUId } from '../utils/token';\nimport AuthContext from '../AuthContext';\n\nfunction ProfileList() {\n  const uid = extractUId(React.useContext(AuthContext));\n  return (\n    <List>\n      <ListItem button key={'profile'} component={Link} to={`/profile/${uid}`}>\n        <ListItemIcon>\n          <AccountCircle />\n        </ListItemIcon>\n        <ListItemText primary=\"Profile\" />\n      </ListItem>\n    </List>\n  );\n}\n\nexport default ProfileList;\n","import React from \"react\";\nimport axios from 'axios';\nimport {\n  Dialog,\n  DialogTitle,\n  DialogActions,\n  DialogContent,\n  DialogContentText,\n  IconButton,\n  Button,\n  Switch,\n  TextField,\n  Grid,\n  FormControlLabel,\n  FormLabel\n} from \"@material-ui/core\";\nimport Visibility from \"@material-ui/icons/Visibility\";\nimport VisibilityOff from \"@material-ui/icons/VisibilityOff\";\nimport Add from \"@material-ui/icons/Add\";\nimport AuthContext from \"../../AuthContext\";\n\nfunction AddChannelDialog({ ...props }) {\n  const [open, setOpen] = React.useState(false);\n  const token = React.useContext(AuthContext);\n  function handleClickOpen() {\n    setOpen(true);\n  }\n  function handleClose() {\n    setOpen(false);\n  }\n  function handleSubmit(event) {\n    event.preventDefault();\n    const name = event.target[0].value;\n    const secret = event.target[1].checked;\n    const is_public = !secret;\n\n    if (!name) return;\n\n    axios\n      .post(`/channels/create`, { token, name, is_public })\n      .then(response => {\n        console.log(response);\n        props.callback();\n      })\n      .catch(err => {});\n  }\n  return (\n    <div>\n      <IconButton size=\"small\" onClick={handleClickOpen}>\n        <Add />\n      </IconButton>\n      <Dialog\n        open={open}\n        onClose={handleClose}\n        aria-labelledby=\"form-dialog-title\"\n      >\n        <DialogTitle id=\"form-dialog-title\">Create Channel</DialogTitle>\n        <form onSubmit={handleSubmit}>\n          <DialogContent>\n            <DialogContentText>\n              Complete the form below to create a new channel\n            </DialogContentText>\n            <Grid\n              container\n              spacing={2}\n              direction=\"row\"\n              justify=\"center\"\n              alignItems=\"center\"\n            >\n              <Grid item xs={12}>\n                <TextField\n                  autoFocus\n                  margin=\"dense\"\n                  id=\"channel_name\"\n                  label=\"Channel Name\"\n                  name=\"channel_name\"\n                  fullWidth\n                />\n              </Grid>\n              <Grid container item justify=\"center\" alignItems=\"center\">\n                <Visibility />\n                <FormControlLabel\n                  control={\n                    <Switch\n                      value=\"secret\"\n                      inputProps={{ \"aria-label\": \"Secret\" }}\n                    />\n                  }\n                  label=\"Secret\"\n                  labelPlacement=\"top\"\n                />\n                <VisibilityOff />\n              </Grid>\n            </Grid>\n          </DialogContent>\n          <DialogActions>\n            <Button onClick={handleClose} color=\"primary\">\n              Cancel\n            </Button>\n            <Button onClick={handleClose} type=\"submit\" color=\"primary\">\n              Create\n            </Button>\n          </DialogActions>\n        </form>\n      </Dialog>\n    </div>\n  );\n}\n\nexport default AddChannelDialog;\n","import React from 'react';\nimport axios from 'axios';\nimport { Link } from 'react-router-dom';\n\nimport {\n  List,\n  ListItem,\n  ListItemIcon,\n  ListItemText,\n  ListSubheader,\n} from '@material-ui/core';\n\nimport RadioButtonCheckedIcon from '@material-ui/icons/RadioButtonChecked';\nimport RadioButtonUncheckedIcon from '@material-ui/icons/RadioButtonUnchecked';\nimport AuthContext from '../AuthContext';\nimport AddChannelDialog from './Channel/AddChannelDialog';\n\nimport { useStep } from '../utils/update';\n\nfunction ChannelList({ channel_id: curr_channel_id }) {\n  const [myChannels, setMyChannels] = React.useState([]);\n  const [allChannels, setAllChannels] = React.useState([]);\n\n  const token = React.useContext(AuthContext);\n\n  const fetchChannelsData = () => {\n    // fetch channels data\n    const getMyChannels = axios.get('/channels/list', { params: { token } });\n    const getAllChannels = axios.get('/channels/listall', { params: { token } });\n\n    axios.all([getMyChannels, getAllChannels]).then(\n      axios.spread((myChannelResponse, allChannelResponse) => {\n        const myChannelData = myChannelResponse.data.channels;\n        const allChannelData = allChannelResponse.data.channels;\n        const filteredChannels = allChannelData.filter((channel) => {\n          return (\n            myChannelData.find((c) => c.channel_id === channel.channel_id) ===\n            undefined\n          );\n        });\n        setMyChannels(myChannelData);\n        setAllChannels(filteredChannels);\n      })\n    );\n  };\n\n  const step = useStep(fetchChannelsData, [], 2);\n\n  return (\n    <>\n      <List\n        subheader={\n          <ListSubheader style={{ display: 'flex' }}>\n            <span style={{ flex: 1 }}>My Channels</span>\n            <AddChannelDialog callback={fetchChannelsData} />\n          </ListSubheader>\n        }\n      >\n        {myChannels.map(({ channel_id, name }, index) => (\n          <ListItem\n            button\n            key={channel_id}\n            component={Link}\n            to={`/channel/${channel_id}`}\n          >\n            <ListItemIcon>\n              {channel_id == curr_channel_id ? (\n                <RadioButtonCheckedIcon />\n              ) : (\n                <RadioButtonUncheckedIcon />\n              )}\n            </ListItemIcon>\n            <ListItemText primary={name} />\n          </ListItem>\n        ))}\n      </List>\n      <List subheader={<ListSubheader>Other Channels</ListSubheader>}>\n        {allChannels.map(({ channel_id, name }, index) => (\n          <ListItem\n            button\n            key={channel_id}\n            component={Link}\n            to={`/channel/${channel_id}`}\n          >\n            <ListItemIcon>\n              {channel_id == curr_channel_id ? (\n                <RadioButtonCheckedIcon />\n              ) : (\n                <RadioButtonUncheckedIcon />\n              )}\n            </ListItemIcon>\n            <ListItemText primary={name} />\n          </ListItem>\n        ))}\n      </List>\n    </>\n  );\n}\n\nexport default ChannelList;\n","import React from 'react';\nimport ProfileList from './ProfileList';\nimport ChannelList from './ChannelList';\n\nfunction ProfileChannelLists({ channel_id }) {\n  return (\n    <>\n      <ProfileList />\n      <ChannelList channel_id={channel_id} />\n    </>\n  );\n}\n\nexport default ProfileChannelLists;\n","import React from 'react';\nimport Layout from '../components/Layout';\nimport ProfileChannelLists from '../components/ProfileChannelLists';\nimport { Typography } from '@material-ui/core';\n\nfunction HomePage(props) {\n  return (\n    <Layout\n      menu={<ProfileChannelLists />}\n      body={\n        <>\n          <Typography variant=\"h4\">WELCOME</Typography>\n          <div style={{ paddingTop: 15 }}>\n            <Typography variant=\"body1\">\n              This is SengChat: agile messaging for Software Engineers \n            </Typography>\n          </div>\n        </>\n      }\n    />\n  );\n}\n\nexport default HomePage;\n","import React from 'react';\nimport axios from 'axios';\n\nimport {\n  Dialog,\n  DialogTitle,\n  DialogActions,\n  DialogContent,\n  MenuItem,\n  Select,\n  DialogContentText,\n  Button,\n  TextField,\n} from '@material-ui/core';\nimport AuthContext from '../../AuthContext';\nimport {useStep} from '../../utils/update';\n\nfunction AddMemberDialog({ channel_id, ...props }) {\n  const [open, setOpen] = React.useState(false);\n  const [selectedUser, setSelectedUser] = React.useState('');\n  const [users, setUsers] = React.useState([]);\n\n  const token = React.useContext(AuthContext);\n\n  const step = useStep();\n\n\n  function fetchUserData() {\n    axios\n    .get('/users/all', {\n      params: {\n        token,\n      },\n    })\n    .then(({ data }) => {\n      setUsers(data['users']);\n    })\n    .catch((err) => {});\n  }\n\n  React.useEffect(() => {\n      fetchUserData();\n  }, []);\n\n  const handleUserSelect = event => {\n      const newUserId = parseInt(event.target.value,10);\n      setSelectedUser(newUserId);\n  };\n\n  function handleClickOpen() {\n    setOpen(true);\n  }\n  function handleClose() {\n    setOpen(false);\n  }\n  function handleSubmit(event) {\n    event.preventDefault();\n    const u_id = selectedUser;\n\n    if (!u_id) return;\n\n    axios.post(`/channel/invite`, { token, u_id, channel_id })\n      .then((response) => {\n        console.log(response);\n        step();\n      })\n      .catch((err) => {});\n  }\n  return (\n    <div>\n      <Button variant=\"outlined\" color=\"primary\" onClick={handleClickOpen}>\n        Invite Member\n      </Button>\n      <Dialog\n        open={open}\n        onClose={handleClose}\n        aria-labelledby=\"form-dialog-title\"\n      >\n        <DialogTitle id=\"form-dialog-title\">Invite User</DialogTitle>\n        <form onSubmit={handleSubmit}>\n          <DialogContent>\n            <DialogContentText>\n              Enter a user id below to invite a user to this channel\n            </DialogContentText>\n            <Select style={{width:\"100%\"}} id=\"u_id\" onChange={handleUserSelect} value={selectedUser}>\n              {users.map((d, idx) => {\n                return <MenuItem key={d.u_id} value={d.u_id}>{d.name_first} {d.name_last}</MenuItem>\n              })}\n            </Select>\n          </DialogContent>\n          <DialogActions>\n            <Button onClick={handleClose} color=\"primary\">\n              Cancel\n            </Button>\n            <Button onClick={handleClose} type=\"submit\" color=\"primary\">\n              Invite\n            </Button>\n          </DialogActions>\n        </form>\n      </Dialog>\n    </div>\n  );\n}\n\nexport default AddMemberDialog;\n","import React from 'react';\nimport axios from 'axios';\n\nimport MdiIcon from '@mdi/react';\nimport { mdiPin, mdiPinOutline } from '@mdi/js';\nimport { IconButton } from '@material-ui/core';\n\nimport { withTheme } from '@material-ui/styles';\n\nimport AuthContext from '../../AuthContext';\nimport {StepContext} from '../Channel/ChannelMessages';\n\nfunction MessagePin({\n  message_id,\n  is_pinned = false,\n  theme,\n}) {\n\n  const [isPinned, setIsPinned] = React.useState(is_pinned);\n  React.useEffect(() => setIsPinned(is_pinned),[is_pinned]);\n\n  const token = React.useContext(AuthContext);\n  let step = React.useContext(StepContext);\n  step = step ? step : () => {}; // sanity check\n\n  const toggle = () => {\n    if (isPinned) {\n      axios.post(`/message/unpin`, {\n        token,\n        message_id,\n      })\n      .then(() => {\n        step();\n      });\n    } else {\n      axios.post(`/message/pin`, {\n        token,\n        message_id,\n      })\n      .then(() => {\n        step();\n      });\n    }\n    // Optimistic re-rendering\n    // setIsPinned(isPinned => !!!isPinned);\n  };\n\n  return (\n    <IconButton\n    onClick={toggle}\n    style={{ margin: 1 }}\n    size=\"small\"\n    edge=\"end\"\n    aria-label=\"delete\"\n    >\n    {isPinned ? (\n        <MdiIcon\n        path={mdiPin}\n        size=\"1em\"\n        color={theme && theme.palette.action.active}\n        />\n    ) : (\n        <MdiIcon\n        path={mdiPinOutline}\n        size=\"1em\"\n        color={theme && theme.palette.action.active}\n        />\n    )}\n    </IconButton>\n  );\n}\n\nexport default withTheme(MessagePin);\n","import React from 'react';\nimport axios from 'axios';\n\nimport {\n  Badge,\n  IconButton,\n} from '@material-ui/core';\n\nimport ThumbUpIcon from '@material-ui/icons/ThumbUp';\nimport ThumbUpOutlinedIcon from '@material-ui/icons/ThumbUpOutlined';\n\nimport AuthContext from '../../AuthContext';\nimport {StepContext} from '../Channel/ChannelMessages';\n\nfunction MessageReact({\n  message_id,\n  reacts = [] /* [{ react_id, u_ids }] */,\n}) {\n\n  const token = React.useContext(AuthContext);\n  let step = React.useContext(StepContext);\n  step = step ? step : () => {}; // sanity check\n\n  const messageReact = (is_reacted) => {\n    if (is_reacted) {\n      axios.post(`/message/unreact`, {\n        token,\n        message_id,\n        react_id: 1 /* FIXME */,\n      })\n      .then(() => {\n        step();\n      });\n    } else {\n      axios.post(`/message/react`, {\n        token,\n        message_id,\n        react_id: 1 /* FIXME */,\n      })\n      .then(() => {\n        step();\n      });\n    }\n  };\n\n  let thumbUpCount = 0;\n  let is_reacted = false;\n  const thumbUpIndex = reacts.findIndex((react) => react.react_id === 1);\n  if (thumbUpIndex !== -1) {\n    thumbUpCount = reacts[thumbUpIndex].u_ids.length;\n    is_reacted = reacts[thumbUpIndex].is_this_user_reacted;\n  }\n\n  return (\n    <Badge\n      anchorOrigin={{ horizontal: 'right', vertical: 'bottom' }}\n      badgeContent={thumbUpCount}\n      color=\"secondary\"\n    >\n      <IconButton\n        onClick={() => messageReact(is_reacted)}\n        style={{ margin: 1 }}\n        size=\"small\"\n        edge=\"end\"\n        aria-label=\"delete\"\n      >\n        {is_reacted ? (\n          <ThumbUpIcon fontSize=\"small\" />\n          ) : (\n          <ThumbUpOutlinedIcon fontSize=\"small\" />\n        )}\n      </IconButton>\n    </Badge>\n  );\n}\n\nexport default MessageReact;\n","import React from 'react';\nimport axios from 'axios';\n\nimport { IconButton } from '@material-ui/core';\n\nimport DeleteIcon from '@material-ui/icons/Delete';\n\nimport AuthContext from '../../AuthContext';\nimport {StepContext} from '../Channel/ChannelMessages';\n\nfunction MessageRemove({\n  message_id,\n  disabled=false,\n}) {\n\n  const token = React.useContext(AuthContext);\n\n  let step = React.useContext(StepContext);\n  step = step ? step : () => {}; // sanity check\n\n  const messageRemove = () => {\n    axios.delete(`/message/remove`, {\n      data: {\n        token,\n        message_id,\n      }\n    })\n    .then(() => {\n      step();\n    });\n  };\n\n\n  return (\n    <IconButton\n      disabled={disabled}\n      onClick={messageRemove}\n      style={{ margin: 1 }}\n      size=\"small\"\n      edge=\"end\"\n      aria-label=\"delete\"\n    >\n      <DeleteIcon fontSize=\"small\" />\n    </IconButton>\n  );\n}\n\nexport default MessageRemove;\n","import React from 'react';\nimport axios from 'axios';\n\nimport {\n    IconButton,\n} from '@material-ui/core';\n\nimport EditIcon from '@material-ui/icons/Edit';\n\nimport AuthContext from '../../AuthContext';\nimport {StepContext} from '../Channel/ChannelMessages';\n\nfunction MessageEdit({\n    message_id,\n    disabled=false,\n}) {\n\n    const token = React.useContext(AuthContext);\n\n    let step = React.useContext(StepContext);\n    step = step ? step : () => {}; // sanity check\n\n    const messageEdit = () => {\n        const message = prompt();\n        if (message === null) return; // basic validation\n\n        /**\n         * Empty message should delete original\n         */\n        if (message === \"\") {\n            axios.delete(`/message/remove`, {\n                data: {\n                    token,\n                    message_id,\n                }\n            })\n            .then(() => {\n                step();\n            });\n            return;\n        }\n\n        /**\n         * Default message edit behaviour\n         */\n        axios.put(`/message/edit`, {\n            token,\n            message_id,\n            message,\n        })\n        .then(() => {\n            step();\n        });\n    };\n\n    return (\n        <IconButton\n            disabled={disabled}\n            onClick={messageEdit}\n            style={{ margin: 1 }}\n            size=\"small\"\n            edge=\"end\"\n            aria-label=\"delete\"\n        >\n            <EditIcon fontSize=\"small\" />\n        </IconButton>\n    );\n}\n\nexport default MessageEdit;\n","import React from 'react';\nimport timeago from 'epoch-timeago';\nimport axios from 'axios';\n\nimport {\n  Avatar,\n  ListItem,\n  ListItemIcon,\n  ListItemText,\n} from '@material-ui/core';\n\nimport AuthContext from '../../AuthContext';\nimport MessagePin from './MessagePin';\nimport MessageReact from './MessageReact';\nimport MessageRemove from './MessageRemove';\nimport MessageEdit from './MessageEdit';\n\nimport {isMatchingId} from '../../utils';\nimport {extractUId} from '../../utils/token';\n\nfunction Message({\n  message_id,\n  message = '',\n  u_id,\n  time_created,\n  is_unread = false,\n  is_pinned = false,\n  reacts = [] /* [{ react_id, u_ids }] */,\n}) {\n\n  const [name, setName] = React.useState(\"\");\n  const [imgUrl, setImgUrl] = React.useState();\n  const token = React.useContext(AuthContext);\n  const isUser = isMatchingId(u_id, extractUId(token));\n\n  const msgToList = msg => msg.split(\"\\n\");\n\n  React.useEffect(() => {\n    setName();\n    setImgUrl()\n    axios\n      .get(`/user/profile`, {\n        params: {\n          token,\n          u_id,\n        },\n      })\n      .then(({ data }) => {\n        const {\n          email = '',\n          name_first = '',\n          name_last = '',\n          handle_str = '',\n          profile_img_url = '',\n        } = data;\n        setName(`${name_first} ${name_last}`);\n        setImgUrl(`${profile_img_url}`)\n      })\n      .catch((err) => {\n        console.error(err);\n      });\n  }, [message_id, token, u_id]);\n\n  return (\n    <ListItem key={message_id} style={{ width: '100%' }}>\n      {message && (\n        <>\n          <ListItemIcon>\n            <img className=\"avatar-small\" src={imgUrl} />\n          </ListItemIcon>\n          <div\n            style={{\n              display: 'flex',\n              width: '100%',\n              justifyContent: 'space-between',\n              alignItems: 'center',\n            }}\n          >\n            <ListItemText\n              primary={\n                <>\n                  <span>{name}</span>\n                  <span style={{ paddingLeft: 10, fontSize: 10 }}>\n                    {timeago(time_created * 1000)}\n                  </span>\n                </>\n              }\n              secondary={\n                <div>\n                  {msgToList(message).map((msg, i) => (\n                    <p>{msg}</p>\n                  ))}\n                </div>\n              }\n            />\n            <div style={{ display: 'flex', height: 30, marginLeft: 20 }}>\n              <MessageReact\n                message_id={message_id}\n                reacts={reacts}\n                u_id={u_id}\n              />\n              <MessagePin\n                message_id={message_id}\n                is_pinned={is_pinned}\n              />\n              <MessageEdit\n                message_id={message_id}\n                // disabled={!isUser} /* We have no way of checking admin status */\n              />\n              <MessageRemove\n                message_id={message_id}\n                // disabled={!isUser} /* We have no way of checking admin status */\n              />\n            </div>\n          </div>\n        </>\n      )}\n    </ListItem>\n  );\n}\n\nexport default Message;\n","import {\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogContentText,\n  DialogTitle,\n} from '@material-ui/core';\nimport { KeyboardTimePicker } from '@material-ui/pickers';\nimport React from 'react';\n\nfunction AddMessageTimerDialog({ open, handleClose, onTimerChange, ...props }) {\n  const [selectedDate, setSelectedDate] = React.useState(new Date());\n\n  function handleSubmit(event) {\n    event.preventDefault();\n    onTimerChange(selectedDate);\n  }\n\n  return (\n    <div>\n      <Dialog\n        open={open}\n        onClose={handleClose}\n        aria-labelledby=\"form-dialog-title\"\n      >\n        <DialogTitle id=\"form-dialog-title\">Send later</DialogTitle>\n        <form onSubmit={handleSubmit}>\n          <DialogContent>\n            <KeyboardTimePicker\n              margin=\"normal\"\n              id=\"time-picker\"\n              label=\"Time picker\"\n              value={selectedDate}\n              onChange={(d) => setSelectedDate(d.toDate())}\n              KeyboardButtonProps={{\n                'aria-label': 'change time',\n              }}\n            />\n            <DialogContentText>Enter a time to send</DialogContentText>\n          </DialogContent>\n          <DialogActions>\n            <Button onClick={handleClose} color=\"primary\">\n              Cancel\n            </Button>\n            <Button onClick={handleClose} type=\"submit\" color=\"primary\">\n              Set Time\n            </Button>\n          </DialogActions>\n        </form>\n      </Dialog>\n    </div>\n  );\n}\n\nexport default AddMessageTimerDialog;\n","import axios from 'axios';\nimport {\n  Button,\n  TextField,\n  InputAdornment,\n  IconButton,\n  Typography,\n} from '@material-ui/core';\nimport React from 'react';\nimport SendIcon from '@material-ui/icons/Send';\nimport TimerIcon from '@material-ui/icons/Timer';\nimport { makeStyles } from '@material-ui/styles';\nimport AuthContext from '../../AuthContext';\nimport {StepContext} from '../Channel/ChannelMessages';\nimport AddMessageTimerDialog from './AddMessageTimerDialog';\nimport { useInterval } from '../../utils';\nimport { useStep } from '../../utils/update';\n\nconst useStyles = makeStyles((theme) => ({\n  flex: {\n    display: 'flex',\n    flexDirection: 'row',\n    alignItems: 'center',\n  },\n  input: {\n    margin: theme.spacing(1),\n    marginRight: 0,\n  },\n  button: {\n    margin: theme.spacing(1),\n    marginLeft: 0,\n    alignSelf: 'stretch',\n  },\n  rightIcon: {\n    marginLeft: theme.spacing(1),\n  },\n  standupTimer: {\n    margin: theme.spacing(2),\n  }\n}));\n\nconst TIMER_INACTIVE_VALUE = -1;\n\nfunction AddMessage({ channel_id = '' }) {\n\n  const classes = useStyles();\n  const [currentMessage, setCurrentMessage] = React.useState('');\n  const [currentTimer, setCurrentTimer] = React.useState(TIMER_INACTIVE_VALUE);\n  const [timerDialogOpen, setTimerDialogOpen] = React.useState(false);\n  const token = React.useContext(AuthContext);\n  let onAdd = React.useContext(StepContext);\n  onAdd = onAdd ? onAdd : () => {}; // sanity check\n\n  const isTimerSet = currentTimer !== TIMER_INACTIVE_VALUE;\n\n  const [standupRemaining, setStandupRemaining] = React.useState();\n  const [standupEndTime, setStandupEndTime] = React.useState();\n\n  const submitMessage = () => {\n    const message = currentMessage.trim();\n    if (!message) return;\n    setCurrentMessage('');\n\n    /**\n     * Sending a message when a standup is active\n     * note: probably makes sense that this takes precedence over\n     *       starting a standup.\n     */\n    if (standupRemaining && standupRemaining > 0) {\n      axios.post(`/standup/send`, {\n        token,\n        channel_id,\n        message,\n      })\n        .then(({ data }) => {\n          console.log(data);\n          onAdd();\n        })\n        .catch((err) => {});\n      return;\n    }\n\n    /**\n     * Sending a message when the sendlater timer has been set\n     */\n    if (isTimerSet) {\n      axios.post(`/message/sendlater`, {\n        token,\n        channel_id,\n        message,\n        time_sent: (currentTimer.getTime() / 1000), // ms to s conversion\n      })\n        .then(({ data }) => {\n          console.log(data);\n        })\n        .catch((err) => {});\n      setCurrentTimer(TIMER_INACTIVE_VALUE);\n      return;\n    }\n\n    /**\n     * Starting a standup (any message which starts with /standup)\n     */\n    if (message.startsWith('/standup')) {\n      const re = /\\/standup\\s+([1-9][0-9]*)/;\n      const found = message.match(re);\n      if (!found || found.length < 2) {\n        alert('Usage: /standup <duration in seconds>');\n      } else {\n        var length = parseInt(found[1], 10);\n        if (isNaN(length) || !Number.isInteger(length)) {\n          alert('Usage: /standup <duration in seconds>');\n        } else {\n          axios.post(`/standup/start`, { token, channel_id, length })\n            .then(({ data }) => {\n              const { time_finish } = data;\n              setStandupEndTime(time_finish);\n              alert(`You've started a standup for ${length} seconds`);\n            })\n            .catch((err) => {});\n        }\n      }\n      return;\n    }\n\n    /**\n     * Default message sending behaviour\n     */\n    axios.post(`/message/send`, {\n      token,\n      channel_id,\n      message,\n    })\n      .then(({ data }) => {\n        console.log(data);\n        onAdd();\n      })\n      .catch((err) => {});\n  };\n\n  useInterval(() => {\n    if (standupEndTime > Date.now()/1000) {\n      setStandupRemaining(() => Math.round(standupEndTime - Math.round(Date.now()/1000)));\n    } else {\n      setStandupRemaining()\n    }\n  }, 1000);\n\n  const checkStandupActive = () => {\n    if (standupRemaining > 0) return;\n    axios\n    .get('/standup/active', { params: { token, channel_id } })\n    .then(({ data }) => {\n      const { is_active = false, time_finish } = data;\n      if (is_active && time_finish) {\n        setStandupEndTime(time_finish);\n      }\n    })\n    .catch((err) => {});\n  }\n\n  const step = useStep(checkStandupActive, [currentMessage] /* check when user is typing */);\n\n  const keyDown = (e) => {\n    if (e.key === 'Enter' && !e.getModifierState('Shift')) {\n      e.preventDefault();\n      submitMessage();\n    }\n  };\n\n  return (\n    <>\n      {standupRemaining > 0 && <Typography variant=\"caption\" className={classes.standupTimer}>\n        {`STANDUP ACTIVE: ${standupRemaining} seconds remaining`}\n      </Typography>}\n      <div className={classes.flex}>\n        <TextField\n          className={classes.input}\n          label=\"Send a message \"\n          multiline\n          placeholder=\"...\"\n          // helperText=\"Add a new message to this channel!\"\n          fullWidth\n          margin=\"normal\"\n          variant=\"filled\"\n          onKeyDown={keyDown}\n          value={currentMessage}\n          onChange={(e) => setCurrentMessage(e.target.value)}\n          InputProps={{\n            endAdornment: (\n              <InputAdornment position=\"end\">\n                <IconButton\n                  aria-label=\"toggle visibility\"\n                  disabled={standupRemaining > 0}\n                  onClick={() =>\n                    isTimerSet ? setCurrentTimer(-1) : setTimerDialogOpen(true)\n                  }\n                >\n                  <TimerIcon color={isTimerSet ? 'secondary' : undefined} />\n                </IconButton>\n              </InputAdornment>\n            ),\n          }}\n        />\n        <Button\n          className={classes.button}\n          variant=\"contained\"\n          color=\"primary\"\n          onClick={submitMessage}\n        >\n          Send\n          <SendIcon className={classes.rightIcon} />\n        </Button>\n      </div>\n      <AddMessageTimerDialog\n        open={timerDialogOpen}\n        handleClose={() => setTimerDialogOpen(false)}\n        onTimerChange={setCurrentTimer}\n      />\n    </>\n  );\n}\n\nexport default AddMessage;\n","import React from 'react';\nimport axios from 'axios';\n\nimport { List, ListSubheader, Button, ListItem } from '@material-ui/core';\nimport { useStep } from '../../utils/update';\nimport Message from '../Message';\nimport AuthContext from '../../AuthContext';\nimport AddMessage from '../Message/AddMessage';\nimport { PAGINATION_SIZE, SLICE_SIZE } from '../../utils/constants';\n\n\nexport const StepContext = React.createContext();\nexport const StepProvider = StepContext.Provider;\nexport const StepConsumer = StepContext.Consumer;\n\nfunction ChannelMessages({ channel_id = '' }) {\n\n  const [messages, setMessages] = React.useState([]);\n  const [pagination, setPagination] = React.useState({\n    \"isPaginating\": false,\n    \"currentStart\": 0,\n    \"currentEnd\": 0,\n    \"sliceStart\": 0,\n  })\n  const token = React.useContext(AuthContext);\n\n  const fetchChannelMessages = () => axios\n  .get('/channel/messages', {\n    params: {\n      token,\n      channel_id,\n      start: pagination.isPaginating ? pagination.currentStart : 0,\n    },\n  })\n  .then(({ data }) => {\n    const { messages: newMessages, start, end } = data;\n    setPagination(pagination => ({...pagination, currentEnd: end})); // TODO: add/remove problems\n    setMessages(newMessages);\n  })\n  .catch((err) => {});\n\n  const step = useStep(fetchChannelMessages, [channel_id, pagination.currentStart]);\n\n  const onPrev = () => setPagination(({sliceStart, currentStart, currentEnd, ...pagination}) => {\n\n    const pageSize = messages.length;\n\n    if (sliceStart + SLICE_SIZE < pageSize) {\n      return {\n        ...pagination,\n        currentStart,\n        currentEnd,\n        sliceStart: sliceStart + SLICE_SIZE,\n        isPaginating: true,\n      };\n    }\n\n    return {\n      ...pagination,\n      currentEnd,\n      currentStart: currentEnd,\n      sliceStart: 0,\n      isPaginating: true,\n    };\n\n  });\n\n  const onNext = () => setPagination(({sliceStart, currentStart, ...pagination}) => {\n\n    if (sliceStart >= SLICE_SIZE) {\n      return {\n        ...pagination,\n        currentStart,\n        sliceStart: sliceStart - SLICE_SIZE,\n        isPaginating: !(currentStart == 0 && sliceStart == SLICE_SIZE)\n      };\n    }\n\n    if (currentStart >= PAGINATION_SIZE) {\n      if (currentStart) return {\n        ...pagination,\n        currentStart: currentStart - PAGINATION_SIZE,\n        sliceStart: PAGINATION_SIZE-SLICE_SIZE,\n      };\n    }\n\n    return {\n      ...pagination,\n      currentStart: 0,\n      sliceStart: 0,\n      isPaginating: false,\n    };\n\n  });\n\n  const {currentStart, currentEnd, sliceStart, isPaginating} = pagination;\n\n  const isEnd = currentEnd == -1 && sliceStart >= messages.length - SLICE_SIZE;\n\n  let subheader = `Messages [${currentStart+sliceStart+1}...${Math.min(currentStart+messages.length, currentStart+sliceStart+SLICE_SIZE)}]`;\n  if (messages.length == 0) subheader = `Messages (None)`;\n\n  return (\n    <StepProvider value={fetchChannelMessages}>\n      <hr />\n      <List\n        subheader={<ListSubheader>{subheader}</ListSubheader>}\n        style={{ width: '100%' }}\n      >\n        {\n          (!isEnd &&\n            <ListItem>\n              <Button\n                variant=\"outlined\"\n                color=\"secondary\"\n                onClick={onPrev}\n              >\n                Previous messages\n              </Button>\n            </ListItem>\n          )\n        }\n        {messages.slice(sliceStart, sliceStart + SLICE_SIZE).reverse().map((message) => (\n          <Message key={message.message_id} {...message} />\n        ))}\n        {\n          (isPaginating &&\n            <ListItem>\n              <Button\n                variant=\"outlined\"\n                color=\"secondary\"\n                onClick={onNext}\n              >\n                Next messages\n              </Button>\n            </ListItem>\n          )\n        }\n      </List>\n      <AddMessage channel_id={channel_id} />\n    </StepProvider>\n  );\n}\n\nexport default ChannelMessages;\n","import {\n  Avatar,\n  List,\n  ListItem,\n  ListItemIcon,\n  ListItemText,\n  ListSubheader,\n  Typography,\n  Button,\n  Grid,\n  Link,\n  IconButton,\n} from '@material-ui/core';\nimport PersonAdd from '@material-ui/icons/PersonAdd';\nimport PersonAddDisabled from '@material-ui/icons/PersonAddDisabled';\nimport axios from 'axios';\nimport React from 'react';\nimport AddMemberDialog from './AddMemberDialog';\nimport ChannelMessages from './ChannelMessages';\nimport AuthContext from '../../AuthContext';\nimport { extractUId } from '../../utils/token';\nimport { isMatchingId } from '../../utils';\nimport { useStep } from '../../utils/update';\n\nfunction Channel({ channel_id, ...props }) {\n  const [name, setName] = React.useState('');\n  const [members, setMembers] = React.useState([]);\n  const [owners, setOwners] = React.useState([]);\n  const token = React.useContext(AuthContext);\n  const u_id = extractUId(token);\n\n  function fetchChannelData() {\n    axios\n      .get('/channel/details', {\n        params: {\n          token,\n          channel_id,\n        },\n      })\n      .then(({ data }) => {\n        const { name, owner_members, all_members } = data;\n        // assumes members of form [{ u_id, name_first, name_last }]\n        setMembers(all_members);\n        setOwners(owner_members);\n        setName(name);\n      })\n      .catch((err) => {});\n  }\n\n  const step = useStep(fetchChannelData, [channel_id, token], 2);\n\n  function joinChannel(channel_id, token) {\n    axios\n      .post('/channel/join', {\n        token,\n        channel_id,\n      })\n      .then(() => {\n        fetchChannelData(channel_id, token);\n      })\n      .catch((err) => {});\n  }\n\n  function leaveChannel(channel_id, token) {\n    axios\n      .post('/channel/leave', {\n        token,\n        channel_id,\n      })\n      .then(() => {\n        fetchChannelData(channel_id, token);\n      })\n      .catch((err) => {});\n  }\n\n  function addOwner(u_id) {\n    axios\n      .post('/channel/addowner', {\n        token,\n        channel_id,\n        u_id,\n      })\n      .then(() => {\n        fetchChannelData(channel_id, token);\n      })\n      .catch((err) => {});\n  }\n\n  function removeOwner(u_id) {\n    axios\n      .post('/channel/removeowner', {\n        token,\n        channel_id,\n        u_id,\n      })\n      .then(() => {\n        fetchChannelData(channel_id, token);\n      })\n      .catch((err) => {});\n  }\n\n  function userIsMember(members) {\n    return members.find((member) => isMatchingId(member.u_id, u_id)) !== undefined;\n  }\n\n  function userIsOwner(owners, u_id) {\n    return owners.find((owner) => isMatchingId(owner.u_id, u_id)) !== undefined;\n  }\n\n  const viewerIsOwner = userIsOwner(owners, u_id);\n  const viewerIsMember = userIsMember(members);\n\n  return (\n    <>\n      <Typography variant=\"h4\">{name.toUpperCase()}</Typography>\n      <List subheader={<ListSubheader>Members</ListSubheader>}>\n        {members.map(({ u_id, name_first, name_last, profile_img_url }) => (\n          <ListItem key={u_id}>\n            <ListItemIcon>\n              <img className=\"avatar-small\" src={profile_img_url} />\n            </ListItemIcon>\n            <ListItemText\n              primary={\n                <>\n                  <Grid container alignItems=\"center\" spacing={1}>\n                    <Grid item>\n                      <Link\n                        href={`/profile/${u_id}`}\n                      >{`${name_first} ${name_last}`}</Link>\n                      {`${userIsOwner(owners, u_id) ? ' ' : ' '}`}\n                    </Grid>\n                    {viewerIsOwner && (\n                      <Grid item>\n                        {userIsOwner(owners, u_id) ? (\n                          <IconButton\n                            size=\"small\"\n                            onClick={() => removeOwner(u_id)}\n                          >\n                            <PersonAddDisabled />\n                          </IconButton>\n                        ) : (\n                          <IconButton\n                            size=\"small\"\n                            onClick={() => addOwner(u_id)}\n                          >\n                            <PersonAdd />\n                          </IconButton>\n                        )}\n                      </Grid>\n                    )}\n                  </Grid>\n                </>\n              }\n            />\n          </ListItem>\n        ))}\n        <ListItem key=\"invite_member\">\n          {userIsMember(members) ? (\n            <Grid container spacing={1}>\n              <Grid item>\n                <AddMemberDialog channel_id={channel_id} />\n              </Grid>\n              <Grid item>\n                <Button\n                  variant=\"outlined\"\n                  onClick={() => leaveChannel(channel_id, token)}\n                >\n                  Leave Channel\n                </Button>\n              </Grid>\n            </Grid>\n          ) : (\n            <Button\n              variant=\"outlined\"\n              color=\"primary\"\n              onClick={() => joinChannel(channel_id, token)}\n            >\n              Join Channel\n            </Button>\n          )}\n        </ListItem>\n      </List>\n      {viewerIsMember && <ChannelMessages channel_id={channel_id}/>}\n    </>\n  );\n}\n\nexport default Channel;\n","import React from 'react';\nimport Layout from '../components/Layout';\nimport ProfileChannelLists from '../components/ProfileChannelLists';\nimport Channel from '../components/Channel';\n\nfunction ChannelPage({ match }) {\n  const { channel_id } = match.params;\n  return (\n    <Layout\n      menu={<ProfileChannelLists channel_id={channel_id} />}\n      body={<Channel channel_id={channel_id} />}\n    />\n  );\n}\n\nexport default ChannelPage;\n","import axios from 'axios';\nimport {\n  Avatar,\n  Box,\n  Button,\n  Container,\n  Grid,\n  Link,\n  makeStyles,\n  TextField,\n  Typography,\n} from '@material-ui/core';\nimport LockOutlinedIcon from '@material-ui/icons/LockOutlined';\nimport React from 'react';\n\nconst useStyles = makeStyles((theme) => ({\n  '@global': {\n    body: {\n      backgroundColor: theme.palette.primary.light,\n    },\n  },\n  card: {\n    backgroundColor: theme.palette.background.paper,\n    marginTop: theme.spacing(8),\n    padding: theme.spacing(8),\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n    borderRadius: theme.shape.borderRadius,\n  },\n}));\n\nfunction LoginPage({ setAuth, ...props }) {\n  function handleSubmit(event) {\n    event.preventDefault();\n\n    // Get user inputs (TODO:)\n    const email = event.target[0].value;\n    const password = event.target[2].value;\n\n    // Quick validation\n    if (!email || !password) return;\n\n    // Send to backend\n    axios.post(`/auth/login`, { email, password })\n      .then((response) => {\n        console.log(response);\n        const data = response.data;\n        setAuth(data.token, data.u_id);\n        props.history.push('/');\n      })\n      .catch((err) => {});\n  }\n\n  const classes = useStyles();\n\n  return (\n    <Container component=\"main\" maxWidth=\"sm\">\n      <Box boxShadow={3} className={classes.card}>\n        <Avatar>\n          <LockOutlinedIcon />\n        </Avatar>\n        <Typography component=\"h1\" variant=\"h5\">\n          Login\n        </Typography>\n        <form noValidate onSubmit={handleSubmit}>\n          <TextField\n            variant=\"outlined\"\n            margin=\"normal\"\n            required\n            fullWidth\n            id=\"email\"\n            label=\"Email\"\n            name=\"email\"\n            type=\"text\"\n            autoFocus\n          />\n          <TextField\n            variant=\"outlined\"\n            margin=\"normal\"\n            required\n            fullWidth\n            name=\"password\"\n            label=\"Password\"\n            type=\"password\"\n            id=\"password\"\n            autoComplete=\"current-password\"\n          />\n          <Button type=\"submit\" fullWidth variant=\"contained\" color=\"primary\">\n            Sign In\n          </Button>\n          <Grid container direction=\"column\" alignItems=\"center\">\n            <Grid item>\n              <br />\n              <Link href=\"/register\" variant=\"body1\">\n                {\"Don't have an account? Register\"}\n              </Link>\n            </Grid>\n            <Grid item>\n              <br />\n              <Link href=\"/forgot_password\" variant=\"body1\">\n                Forgot password?\n              </Link>\n            </Grid>\n          </Grid>\n        </form>\n      </Box>\n    </Container>\n  );\n}\n\nexport default LoginPage;\n","import axios from 'axios';\nimport {\n  Avatar,\n  Box,\n  Button,\n  Container,\n  Grid,\n  Link,\n  makeStyles,\n  TextField,\n  Typography,\n} from '@material-ui/core';\nimport DeveloperOutlinedIcon from '@material-ui/icons/DeveloperModeOutlined';\nimport React from 'react';\n\nconst useStyles = makeStyles((theme) => ({\n  '@global': {\n    body: {\n      backgroundColor: theme.palette.primary.light,\n    },\n  },\n  card: {\n    backgroundColor: theme.palette.background.paper,\n    marginTop: theme.spacing(8),\n    padding: theme.spacing(8),\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n    borderRadius: theme.shape.borderRadius,\n  },\n}));\n\nfunction RegisterPage({ setAuth, ...props }) {\n\n  const [values, setValues] = React.useState({\n    name_first: '',\n    name_last: '',\n    email: '',\n    password: '',\n  });\n\n  const handleChange = name => event => {\n    setValues({ ...values, [name]: event.target.value });\n  };\n\n  function handleSubmit(event) {\n    event.preventDefault();\n\n    // Quick validation\n    if (!values.email || !values.password) return;\n\n    // Send to backend\n    axios.post(`/auth/register`, { ...values })\n      .then((response) => {\n        console.log(response);\n        const data = response.data;\n        setAuth(data.token, data.u_id);\n        props.history.push('/');\n      })\n      .catch((err) => {});\n  }\n\n  const classes = useStyles();\n\n  return (\n    <Container component=\"main\" maxWidth=\"sm\">\n      <Box boxShadow={3} className={classes.card}>\n        <Avatar>\n          <DeveloperOutlinedIcon color=\"secondary\" />\n        </Avatar>\n        <Typography component=\"h1\" variant=\"h5\">\n          Register\n        </Typography>\n        <form noValidate onSubmit={handleSubmit}>\n          <TextField\n            variant=\"outlined\"\n            margin=\"normal\"\n            required\n            fullWidth\n            id=\"name_first\"\n            label=\"First name\"\n            name=\"name_first\"\n            type=\"text\"\n            autoFocus\n            value={values.name_first}\n            onChange={handleChange('name_first')}\n          />\n          <TextField\n            variant=\"outlined\"\n            margin=\"normal\"\n            required\n            fullWidth\n            id=\"name_last\"\n            label=\"Last name\"\n            name=\"name_last\"\n            type=\"text\"\n            value={values.name_last}\n            onChange={handleChange('name_last')}\n          />\n          <TextField\n            variant=\"outlined\"\n            margin=\"normal\"\n            required\n            fullWidth\n            id=\"email\"\n            label=\"Email\"\n            name=\"email\"\n            type=\"email\"\n            value={values.email}\n            onChange={handleChange('email')}\n          />\n          <TextField\n            variant=\"outlined\"\n            margin=\"normal\"\n            required\n            fullWidth\n            name=\"password\"\n            label=\"Password\"\n            type=\"password\"\n            id=\"password\"\n            autoComplete=\"current-password\"\n            value={values.password}\n            onChange={handleChange('password')}\n          />\n          <Button type=\"submit\" fullWidth variant=\"contained\" color=\"primary\">\n            Sign Up\n          </Button>\n          <Grid container>\n            <Grid item>\n              <br />\n              <Link href=\"/login\" variant=\"body1\">\n                {'Already have an account? Login'}\n              </Link>\n            </Grid>\n          </Grid>\n        </form>\n      </Box>\n    </Container>\n  );\n}\n\nexport default RegisterPage;\n","import axios from 'axios';\nimport {\n  Avatar,\n  Box,\n  Button,\n  Container,\n  Grid,\n  Link,\n  makeStyles,\n  TextField,\n  Typography,\n} from '@material-ui/core';\nimport DeveloperOutlinedIcon from '@material-ui/icons/DeveloperModeOutlined';\nimport React from 'react';\n\nconst useStyles = makeStyles((theme) => ({\n  '@global': {\n    body: {\n      backgroundColor: theme.palette.primary.light,\n    },\n  },\n  card: {\n    backgroundColor: theme.palette.background.paper,\n    marginTop: theme.spacing(8),\n    padding: theme.spacing(8),\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n    borderRadius: theme.shape.borderRadius,\n  },\n}));\n\nfunction ForgotPasswordPage(props) {\n  function handleSubmit(event) {\n    event.preventDefault();\n\n    // Get user inputs (TODO:)\n    const email = event.target[0].value;\n\n    // Quick validation\n    if (!email) return;\n\n    // Send to backend\n    axios.post(`/auth/passwordreset/request`, { email })\n      .then((response) => {\n        console.log(response);\n        props.history.push('/reset_password');\n      })\n      .catch((err) => {});\n  }\n\n  const classes = useStyles();\n\n  return (\n    <Container component=\"main\" maxWidth=\"sm\">\n      <Box boxShadow={3} className={classes.card}>\n        <Avatar>\n          <DeveloperOutlinedIcon color=\"secondary\" />\n        </Avatar>\n        <Typography component=\"h1\" variant=\"h5\">\n          Forgot Password\n        </Typography>\n        <form noValidate onSubmit={handleSubmit}>\n          <TextField\n            variant=\"outlined\"\n            margin=\"normal\"\n            required\n            fullWidth\n            id=\"email\"\n            label=\"Email\"\n            name=\"email\"\n            type=\"email\"\n            autoFocus\n          />\n          <Button type=\"submit\" fullWidth variant=\"contained\" color=\"primary\">\n            Send Recovery Email\n          </Button>\n          <Grid container>\n            <Grid item>\n              <br />\n              <Link href=\"/login\" variant=\"body1\">\n                {'Remember your password? Login'}\n              </Link>\n            </Grid>\n          </Grid>\n        </form>\n      </Box>\n    </Container>\n  );\n}\n\nexport default ForgotPasswordPage;\n","import axios from 'axios';\nimport {\n  Avatar,\n  Box,\n  Button,\n  Container,\n  Grid,\n  Link,\n  makeStyles,\n  TextField,\n  Typography,\n} from '@material-ui/core';\nimport DeveloperOutlinedIcon from '@material-ui/icons/DeveloperModeOutlined';\nimport React from 'react';\n\nconst useStyles = makeStyles((theme) => ({\n  '@global': {\n    body: {\n      backgroundColor: theme.palette.primary.light,\n    },\n  },\n  card: {\n    backgroundColor: theme.palette.background.paper,\n    marginTop: theme.spacing(8),\n    padding: theme.spacing(8),\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n    borderRadius: theme.shape.borderRadius,\n  },\n}));\n\nfunction ForgotPasswordPage(props) {\n  function handleSubmit(event) {\n    event.preventDefault();\n\n    // Get user inputs (TODO:)\n    const reset_code = event.target[0].value;\n    const new_password = event.target[2].value;\n\n    // Quick validation\n    if (!reset_code || !new_password) return;\n\n    // Send to backend\n    axios.post(`/auth/passwordreset/reset`, { reset_code, new_password })\n      .then((response) => {\n        console.log(response);\n        props.history.push('/login');\n      })\n      .catch((err) => {});\n  }\n\n  const classes = useStyles();\n\n  return (\n    <Container component=\"main\" maxWidth=\"sm\">\n      <Box boxShadow={3} className={classes.card}>\n        <Avatar>\n          <DeveloperOutlinedIcon color=\"secondary\" />\n        </Avatar>\n        <Typography component=\"h1\" variant=\"h5\">\n          Reset Password\n        </Typography>\n        <form noValidate onSubmit={handleSubmit}>\n          <TextField\n            variant=\"outlined\"\n            margin=\"normal\"\n            required\n            fullWidth\n            id=\"reset_code\"\n            label=\"Reset code\"\n            name=\"reset_code\"\n            type=\"text\"\n            autoFocus\n          />\n          <TextField\n            variant=\"outlined\"\n            margin=\"normal\"\n            required\n            fullWidth\n            id=\"new_password\"\n            label=\"New Password\"\n            name=\"new_password\"\n            type=\"password\"\n          />\n          <Button type=\"submit\" fullWidth variant=\"contained\" color=\"primary\">\n            Change Password\n          </Button>\n          <Grid container>\n            <Grid item>\n              <br />\n              <Link href=\"/login\" variant=\"body1\">\n                {'Remember your password? Login'}\n              </Link>\n            </Grid>\n          </Grid>\n        </form>\n      </Box>\n    </Container>\n  );\n}\n\nexport default ForgotPasswordPage;\n","import React from 'react';\nimport Edit from '@material-ui/icons/Edit';\nimport Cancel from '@material-ui/icons/Cancel';\nimport Save from '@material-ui/icons/Save';\nimport { TextField, Grid } from '@material-ui/core';\n\nfunction EditableFields({\n  editable,\n  master,\n  masterValue,\n  slaves,\n  slaveValues,\n  onSave,\n  ...props\n}) {\n\n  const [edit, setEdit] = React.useState(false);\n  const [prevMasterValue, setPrevMasterValue] = React.useState();\n  const [currMasterValue, setCurrMasterValue] = React.useState(masterValue);\n  const [prevSlaveValues, setPrevSlaveValues] = React.useState([]);\n  const [currSlaveValues, setCurrSlaveValues] = React.useState(slaveValues);\n\n  // Handle async passing of master/slave values\n  React.useEffect(() => {\n    setCurrMasterValue(masterValue);\n    setCurrSlaveValues(slaveValues);\n  }, [masterValue, slaveValues]);\n\n  function toggleEdit() {\n    setPrevMasterValue(currMasterValue);\n    setPrevSlaveValues(currSlaveValues);\n    setEdit(!edit);\n  }\n\n  function icons() {\n    if (!editable) return null;\n    if (edit) {\n      return (\n        <>\n          <Save\n            style={{ cursor: 'pointer' }}\n            onClick={() => {\n              if (!currMasterValue) return;\n              if (onSave) {\n                if (currSlaveValues) {\n                  onSave(currMasterValue, ...currSlaveValues);\n                } else {\n                  onSave(currMasterValue);\n                }\n              }\n              toggleEdit();\n            }}\n          />\n          <Cancel\n            style={{ cursor: 'pointer' }}\n            onClick={() => {\n              setCurrMasterValue(prevMasterValue);\n              setCurrSlaveValues(prevSlaveValues);\n              toggleEdit();\n            }}\n          />\n        </>\n      );\n    }\n    return <Edit style={{ cursor: 'pointer' }} onClick={toggleEdit} />;\n  }\n  function onSlaveChange(event, valueIndex) {\n    let copySlaves = currSlaveValues.map((val, idx) => {\n      if (idx === valueIndex) return event.target.value;\n      return val;\n    });\n    setCurrSlaveValues(copySlaves);\n  }\n\n  function onMasterChange(event) {\n    setCurrMasterValue(event.target.value);\n  }\n\n  return (\n    <Grid container spacing={1} alignItems=\"flex-end\">\n      {slaves &&\n        slaves.map((slave, idx) => {\n          return (\n            <Grid item key={idx}>\n              {slave({\n                value: currSlaveValues[idx] || \"\", // \"\" required for label placeholder mechanics\n                InputProps: { readOnly: !edit },\n                onChange: (event) => onSlaveChange(event, idx),\n              })}\n            </Grid>\n          );\n        })}\n      <Grid item>\n        {master({\n          value: currMasterValue || \"\", // \"\" required for label placeholder mechanics\n          InputProps: { readOnly: !edit },\n          onChange: onMasterChange,\n        })}\n      </Grid>\n      {editable && <Grid item>{icons()}</Grid>}\n    </Grid>\n  );\n}\n\nexport default EditableFields;\n","import {\n  List,\n  ListItem,\n  ListSubheader,\n  TextField,\n  Typography,\n} from '@material-ui/core';\nimport axios from 'axios';\nimport React from 'react';\nimport AuthContext from '../../AuthContext';\nimport { extractUId } from '../../utils/token';\nimport EditableFields from './EditableFields';\n\nfunction Profile({ profile }) {\n\n  const [profileDetails, setProfileDetails] = React.useState({});\n  const token = React.useContext(AuthContext);\n  const u_id = extractUId(token);\n\n  React.useEffect(() => {\n    axios\n      .get(`/user/profile`, { params: { token, u_id: profile } })\n      .then(({ data }) => {\n        console.log(data);\n        setProfileDetails(data);\n      })\n      .catch((err) => {\n        console.error(err);\n      });\n  }, [profile, token]);\n\n  function updateName(name_last, name_first) {\n    axios\n      .put(`/user/profile/setname`, { token, name_first, name_last })\n      .then(() => {\n        console.log('all good');\n      })\n      .catch((err) => {\n        console.error(err);\n      });\n  }\n\n  function updateEmail(email) {\n    axios\n      .put(`/user/profile/setemail`, { token, email })\n      .then(() => {\n        console.log('all good');\n      })\n      .catch((err) => {\n        console.error(err);\n      });\n  }\n\n  function updateProfileImgUrl(raw_text, x_start, y_start, x_end, y_end) {\n    const items = raw_text.split(',');\n    axios\n      .post(`/user/profiles/uploadphoto`, { token,\n        img_url: items[0],\n        x_start: items[1],\n        y_start: items[2],\n        x_end: items[3],\n        y_end: items[4],\n      })\n      .then(() => {\n        console.log('all good');\n      })\n      .catch((err) => {\n        console.error(err);\n      });\n  }\n\n  function updateHandle(handle_str) {\n    axios\n      .put(`/user/profile/sethandle`, { token, handle_str })\n      .then(() => {\n        console.log('all good');\n      })\n      .catch((err) => {\n        console.error(err);\n      });\n  }\n\n  const editable = u_id.toString() === profile;\n\n  return (\n    <>\n      <Typography variant=\"h4\">Profile</Typography>     \n      <List subheader={<ListSubheader>Profile Details</ListSubheader>}>\n        <ListItem key={'name'}>\n          <EditableFields\n            editable={editable}\n            masterValue={profileDetails.name_last}\n            slaveValues={[profileDetails.name_first]}\n            master={(passed_props) => (\n              <TextField label={'Last Name'} {...passed_props} />\n            )}\n            slaves={[\n              (passed_props) => (\n                <TextField label={'First Name'} {...passed_props} />\n              ),\n            ]}\n            onSave={updateName}\n          />\n        </ListItem>\n        <ListItem key={'email'}>\n          <EditableFields\n            editable={editable}\n            masterValue={profileDetails.email}\n            master={(passed_props) => (\n              <TextField label={'Email'} {...passed_props} />\n            )}\n            onSave={updateEmail}\n          />\n        </ListItem>\n        <ListItem key={'handle'}>\n          <EditableFields\n            editable={editable}\n            masterValue={profileDetails.handle_str}\n            master={(passed_props) => (\n              <TextField label={'Handle'} {...passed_props} />\n            )}\n            onSave={updateHandle}\n          />\n        </ListItem>\n        <ListItem key={'img_url'}>\n          <EditableFields\n            editable={editable}\n            masterValue={profileDetails.img_url}\n            master={(passed_props) => (\n              <TextField label={'img_url,x1,y1,x2,y2'} {...passed_props} />\n            )}\n            onSave={updateProfileImgUrl}\n          />\n        </ListItem>\n        <br />\n        <div>NOTE: The final field input is to set a profile image. Please enter the 5 components (image url, x_start, y_start, x_end, y_end) separated by commas</div>\n      </List>\n    </>\n  );\n}\n\nexport default Profile;\n","import React from 'react';\nimport Layout from '../components/Layout';\nimport ProfileChannelLists from '../components/ProfileChannelLists';\nimport Profile from '../components/Profile';\n\nfunction ProfilePage({ match }) {\n  const { profile } = match.params;\n  return (\n    <Layout\n      menu={<ProfileChannelLists />}\n      body={<Profile profile={profile} />}\n    />\n  );\n}\n\nexport default ProfilePage;","import {\n    Typography, List, ListSubheader,\n} from '@material-ui/core';\nimport axios from 'axios';\nimport React from 'react';\nimport LinearProgress from '@material-ui/core/LinearProgress';\nimport AuthContext from '../../AuthContext';\nimport { extractUId } from '../../utils/token';\nimport Message from '../Message';\n\nfunction Search({ query_str, ...props }) {\n\n    const [loading, setLoading] = React.useState(true);\n    const [messages, setMessages] = React.useState([]);\n\n    const token = React.useContext(AuthContext);\n    const u_id = extractUId(token);\n\n    function performSearch() {\n        axios\n        .get('/search', {\n            params: {\n                token,\n                query_str,\n            },\n        })\n        .then(({ data }) => {\n            const { messages } = data;\n            if (typeof messages === \"undefined\" || !Array.isArray(messages)) return;\n            setMessages(messages)\n            setLoading(false);\n        })\n        .catch((err) => {\n            setLoading(false);\n        });\n    }\n\n    // Only perform search if there is a query\n    React.useEffect(() => {\n        if (query_str !== \"\") performSearch();\n    }, [token, query_str])\n\n    // If there is no query\n    if (query_str === \"\") {\n        return <>\n            <Typography variant=\"h4\" style={{marginBottom: 10}}>Search</Typography>\n            <Typography variant=\"h6\">Enter a query in the search bar above </Typography>\n        </>\n    }\n\n    // If there is a query\n    return <>\n        <Typography variant=\"h4\" style={{marginBottom: 10}}>Search Results</Typography>\n        {(loading) ?\n            <LinearProgress />\n        :\n            (messages.length == 0) ?\n                <Typography variant=\"h6\">Your search did not return any results </Typography>\n            :\n                <List\n                    subheader={<ListSubheader>Messages</ListSubheader>}\n                    style={{ width: '100%' }}\n                >\n                {messages.slice().reverse().map((message) => (\n                    <Message key={message.message_id} {...message} />\n                ))}\n                </List>\n            }\n    </>\n}\n\nexport default Search;\n","import React from 'react';\nimport Layout from '../components/Layout';\nimport ProfileChannelLists from '../components/ProfileChannelLists';\nimport Search from '../components/Search';\n\nfunction SearchPage({ match }) {\n  const { query_str=\"\" } = match.params;\n  return (\n    <Layout\n      menu={<ProfileChannelLists />}\n      body={<Search query_str={query_str} />}\n    />\n  );\n}\n\nexport default SearchPage;\n","import React from 'react';\nimport { Redirect, Route } from 'react-router-dom';\nimport AuthContext from '../../AuthContext';\n\nfunction ProtectedRoute(props) {\n  const token = React.useContext(AuthContext);\n  console.log(token);\n  if (!token) {\n    return <Redirect to=\"/login\" />;\n  }\n  return <Route {...props} />;\n}\n\nexport default ProtectedRoute;\n","import axios from 'axios';\nimport qs from 'qs';\nimport _ from 'lodash';\n\nimport { url } from './utils/constants';\nimport { DEFAULT_ERROR_TEXT } from './utils/text';\nimport { toast } from 'react-toastify';\n\naxios.defaults.baseURL = url;\naxios.defaults.headers.put['Content-Type'] = 'application/x-www-form-urlencoded';\naxios.defaults.headers.post['Content-Type'] = 'application/x-www-form-urlencoded';\naxios.defaults.headers.delete['Content-Type'] = 'application/x-www-form-urlencoded';\n\naxios.interceptors.request.use((request) => {\n    if (request.method === 'put' || request.method === 'post' || request.method === 'delete') {\n        request.data = qs.stringify(request.data);\n    }\n    return request;\n});\n\nconst errorHandler = (error) => {\n    // great gist https://gist.github.com/saqueib/a495af17d7c0e2fd5c2316b0822ebac3\n\n    // if has response show the error\n    console.error(error);\n\n    let message = DEFAULT_ERROR_TEXT;\n\n    if (error.response) {\n        console.log(error.response.data)\n        message = _.get(error, 'response.data.message') || DEFAULT_ERROR_TEXT;\n    }\n\n    toast.error(message);\n\n    return Promise.reject({ ...error })\n}\n\nconst responseHandler = (response) => {\n    return response;\n}\n\naxios.interceptors.response.use(responseHandler, errorHandler);","// General POST error\nexport const DEFAULT_ERROR_TEXT = 'An error occured. Try again later';\n\n// Specific GET errors (deprecated)\nexport const CHANNEL_ERROR_TEXT = 'Unable to retrieve channel information';\n","import React from 'react';\nimport { BrowserRouter as Router, Route, Switch } from 'react-router-dom';\n\nimport './App.css';\n\nimport HomePage from './pages/HomePage';\nimport ChannelPage from './pages/ChannelPage';\nimport LoginPage from './pages/LoginPage';\nimport RegisterPage from './pages/RegisterPage';\nimport ForgotPasswordPage from './pages/ForgotPasswordPage';\nimport ResetPasswordPage from './pages/ResetPasswordPage';\nimport ProfilePage from './pages/ProfilePage';\nimport SearchPage from './pages/SearchPage';\n\nimport ProtectedRoute from './components/Layout/ProtectedRoute';\n\nimport { AuthProvider } from './AuthContext';\nimport './axios';\n\nfunction App() {\n  const [authDetails, setAuthDetails] = React.useState(\n    localStorage.getItem('token')\n  );\n\n  function setAuth(token, u_id) {\n    localStorage.setItem('token', token);\n    localStorage.setItem('u_id', u_id);\n    setAuthDetails(token);\n  }\n  return (\n    <AuthProvider value={authDetails}>\n      <Router>\n        <Switch>\n          <Route\n            exact\n            path=\"/login\"\n            render={(props) => {\n              return <LoginPage {...props} setAuth={setAuth} />;\n            }}\n          />\n          <Route\n            exact\n            path=\"/register\"\n            render={(props) => {\n              return <RegisterPage {...props} setAuth={setAuth} />;\n            }}\n          />\n          <Route exact path=\"/forgot_password\" component={ForgotPasswordPage} />\n          <Route exact path=\"/reset_password\" component={ResetPasswordPage} />\n          <ProtectedRoute exact path=\"/\" component={HomePage} />\n          <ProtectedRoute path=\"/profile/:profile\" component={ProfilePage} />\n          <ProtectedRoute path=\"/channel/:channel_id\" component={ChannelPage} />\n          <ProtectedRoute path=\"/search/:query_str\" component={SearchPage} />\n          <ProtectedRoute path=\"/search\" component={SearchPage} />\n        </Switch>\n      </Router>\n    </AuthProvider>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then((registration) => {\n      registration.unregister();\n    });\n  }\n}\n","import { red } from '@material-ui/core/colors';\nimport { createMuiTheme } from '@material-ui/core/styles';\n\n// A custom theme for this app\nconst theme = createMuiTheme({\n  palette: {\n    primary: {\n      main: '#556cd6',\n    },\n    secondary: {\n      main: '#19857b',\n    },\n    error: {\n      main: red.A400,\n    },\n    background: {\n      default: '#fff',\n    },\n  },\n});\n\nexport default theme;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport { ThemeProvider } from '@material-ui/styles';\nimport { ToastContainer } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.min.css';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport theme from './theme';\nimport { MuiPickersUtilsProvider } from '@material-ui/pickers';\nimport MomentUtils from '@date-io/moment';\n\nReactDOM.render(\n  <ThemeProvider theme={theme}>\n    <MuiPickersUtilsProvider utils={MomentUtils}>\n      {/* CssBaseline kickstart an elegant, consistent, and simple baseline to build upon. */}\n      <CssBaseline />\n      <App />\n      <ToastContainer\n        position=\"top-center\"\n        autoClose={5000}\n        hideProgressBar={false}\n        newestOnTop\n        closeOnClick\n        rtl={false}\n        pauseOnVisibilityChange\n        draggable\n        pauseOnHover\n      />\n    </MuiPickersUtilsProvider>\n  </ThemeProvider>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}